[{"D:\\ReactJS\\projects\\ndv-test-task-12-31\\src\\index.js":"1","D:\\ReactJS\\projects\\ndv-test-task-12-31\\src\\reportWebVitals.js":"2","D:\\ReactJS\\projects\\ndv-test-task-12-31\\src\\App.js":"3","D:\\ReactJS\\projects\\ndv-test-task-12-31\\src\\pages\\Main.jsx":"4","D:\\ReactJS\\projects\\ndv-test-task-12-31\\src\\components\\api\\api.js":"5","D:\\ReactJS\\projects\\ndv-test-task-12-31\\src\\reducers\\currencyReducer.js":"6","D:\\ReactJS\\projects\\ndv-test-task-12-31\\src\\reducers\\index.js":"7","D:\\ReactJS\\projects\\ndv-test-task-12-31\\src\\components\\CurrencyRow.jsx":"8","D:\\ReactJS\\projects\\ndv-test-task-12-31\\src\\pages\\CurrencyRates.jsx":"9"},{"size":668,"mtime":1610130337310,"results":"10","hashOfConfig":"11"},{"size":362,"mtime":499162500000,"results":"12","hashOfConfig":"11"},{"size":585,"mtime":1610130283228,"results":"13","hashOfConfig":"11"},{"size":4259,"mtime":1610128150700,"results":"14","hashOfConfig":"11"},{"size":1061,"mtime":1610130453835,"results":"15","hashOfConfig":"11"},{"size":561,"mtime":1609779402313,"results":"16","hashOfConfig":"11"},{"size":396,"mtime":1609759497382,"results":"17","hashOfConfig":"11"},{"size":588,"mtime":1610127602982,"results":"18","hashOfConfig":"11"},{"size":916,"mtime":1610135264136,"results":"19","hashOfConfig":"11"},{"filePath":"20","messages":"21","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"6964io",{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"27","messages":"28","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"29","usedDeprecatedRules":"24"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\ReactJS\\projects\\ndv-test-task-12-31\\src\\index.js",[],"D:\\ReactJS\\projects\\ndv-test-task-12-31\\src\\reportWebVitals.js",[],["40","41"],"D:\\ReactJS\\projects\\ndv-test-task-12-31\\src\\App.js",[],"D:\\ReactJS\\projects\\ndv-test-task-12-31\\src\\pages\\Main.jsx",["42","43","44","45"],"import axios from \"axios\";\r\nimport React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getAllCurrencyPairs } from \"../components/api/api\";\r\nimport { CurrencyRow } from \"../components/CurrencyRow\";\r\n\r\nexport const Main = () => {\r\n  // const key = process.env.REACT_APP_API_KEY;\r\n  // const instance = axios.create({\r\n  //   baseURL: \"https://api.exchangeratesapi.io\",\r\n  // });\r\n\r\n  const BASE_URL = \"https://api.exchangeratesapi.io/latest\";\r\n\r\n  // const dispatch = useDispatch();\r\n  // const currencyList = useSelector((state) => state.currencyList.rates);\r\n  // const baseCurrency = useSelector((state) => state.currencyList.base);\r\n\r\n  const [currencyOptions, setCurrencyOptions] = React.useState([]);\r\n  const [fromCurrency, setFromCurrency] = React.useState();\r\n  const [toCurrency, setToCurrency] = React.useState();\r\n  const [amount, setAmount] = React.useState();\r\n  const [amountInFromCurrency, setAmountInFromCurrency] = React.useState(true);\r\n  const [exchangeRate, setExchangeRate] = React.useState();\r\n  console.log(exchangeRate, \"set exchange rate\");\r\n\r\n  let toAmount, fromAmount;\r\n\r\n  if (amountInFromCurrency) {\r\n    fromAmount = amount;\r\n    toAmount = amount * exchangeRate;\r\n  } else {\r\n    toAmount = amount;\r\n    fromAmount = amount / exchangeRate;\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    // const veryFirstCurrency = Object.keys(currencyList)[0];\r\n    // console.log(veryFirstCurrency, \"console.log in useEffect\");\r\n    // dispatch(getAllCurrencyPairs(dispatch));\r\n    // getAllCurrencyPairs(dispatch);\r\n    // axios.get(`${BASE_URL}/latest`).then((response) => {\r\n    //   console.log(response, \"use effect data\");\r\n    //   const firstCurrency = Object.keys(data.rates)[0];\r\n    //   setCurrencyOptions([data.base, ...Object.keys(data.rates)]);\r\n    //   setFromCurrency(data.base);\r\n    //   setToCurrency(firstCurrency);\r\n    //   setExchangeRate(data.rates[firstCurrency]);\r\n\r\n    //   console.log(Object.keys(data.rates), \"Keys in main\");\r\n    // });\r\n    // setCurrencyOptions([baseCurrency, ...Object.keys(currencyList)]);\r\n    // setFromCurrency(baseCurrency);\r\n    // setToCurrency(veryFirstCurrency);\r\n    // setExchangeRate(currencyList[veryFirstCurrency]);\r\n    fetch(BASE_URL)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        const firstCurrency = Object.keys(data.rates)[0];\r\n        setCurrencyOptions([data.base, ...Object.keys(data.rates)]);\r\n        setFromCurrency(data.base);\r\n        setToCurrency(firstCurrency);\r\n        setExchangeRate(data.rates[firstCurrency]);\r\n      });\r\n  }, []);\r\n\r\n  // React.useEffect(() => {\r\n  //   if (fromCurrency !== null && toCurrency !== null) {\r\n  //     axios\r\n  //       .get(`latest?base=${fromCurrency}&symbols=${toCurrency}`)\r\n  //       .then((data) => setExchangeRate(data.rates[toCurrency]));\r\n  //   }\r\n  // }, [fromCurrency, toCurrency]);\r\n\r\n  React.useEffect(() => {\r\n    if (fromCurrency && toCurrency) {\r\n      fetch(`${BASE_URL}?base=${fromCurrency}&symbols=${toCurrency}`)\r\n        .then((res) => res.json())\r\n        .then((data) => setExchangeRate(data.rates[toCurrency]));\r\n    }\r\n  }, [fromCurrency, toCurrency]);\r\n\r\n  // fetch(\"https://currate.ru/api/?get=currency_list&key=50760f5e6b3f00f794bcefc26bcb822b\").then(\r\n  //   (response) => {\r\n  //     console.log(response);\r\n  //   },\r\n  // );\r\n\r\n  // console.log(currencyOptions, \"currency options before render\");\r\n\r\n  const handleFromChangeAmount = (e) => {\r\n    setAmount(e.target.value);\r\n    setAmountInFromCurrency(true);\r\n  };\r\n\r\n  const handleToChangeAmount = (e) => {\r\n    setAmount(e.target.value);\r\n    setAmountInFromCurrency(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"Currency-rows\">\r\n      <CurrencyRow\r\n        currencyOptions={currencyOptions}\r\n        selectedCurrency={fromCurrency}\r\n        onChangeCurrency={(e) => setFromCurrency(e.target.value)}\r\n        amount={fromAmount}\r\n        onChangeAmount={handleFromChangeAmount}\r\n      />\r\n      <div>=</div>\r\n      <CurrencyRow\r\n        currencyOptions={currencyOptions}\r\n        selectedCurrency={toCurrency}\r\n        onChangeCurrency={(e) => setToCurrency(e.target.value)}\r\n        amount={toAmount}\r\n        onChangeAmount={handleToChangeAmount}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","D:\\ReactJS\\projects\\ndv-test-task-12-31\\src\\components\\api\\api.js",[],"D:\\ReactJS\\projects\\ndv-test-task-12-31\\src\\reducers\\currencyReducer.js",[],"D:\\ReactJS\\projects\\ndv-test-task-12-31\\src\\reducers\\index.js",[],"D:\\ReactJS\\projects\\ndv-test-task-12-31\\src\\components\\CurrencyRow.jsx",[],"D:\\ReactJS\\projects\\ndv-test-task-12-31\\src\\pages\\CurrencyRates.jsx",[],{"ruleId":"46","replacedBy":"47"},{"ruleId":"48","replacedBy":"49"},{"ruleId":"50","severity":1,"message":"51","line":1,"column":8,"nodeType":"52","messageId":"53","endLine":1,"endColumn":13},{"ruleId":"50","severity":1,"message":"54","line":3,"column":10,"nodeType":"52","messageId":"53","endLine":3,"endColumn":21},{"ruleId":"50","severity":1,"message":"55","line":3,"column":23,"nodeType":"52","messageId":"53","endLine":3,"endColumn":34},{"ruleId":"50","severity":1,"message":"56","line":4,"column":10,"nodeType":"52","messageId":"53","endLine":4,"endColumn":29},"no-native-reassign",["57"],"no-negated-in-lhs",["58"],"no-unused-vars","'axios' is defined but never used.","Identifier","unusedVar","'useDispatch' is defined but never used.","'useSelector' is defined but never used.","'getAllCurrencyPairs' is defined but never used.","no-global-assign","no-unsafe-negation"]